
import pykeepass

# Define the path to your KeePass database file
database_path = r'E:\....\passcodes.kdbx'
def change_me(pwd):
    # Define the new master password
    new_master_password = 'changeme'

    # Load the KeePass database
    try:
        kp_db = pykeepass.PyKeePass(database_path, password=pwd)
        print("password worked is {}".format(pwd))
        exit(1)
    except pykeepass.exceptions.CredentialsError:
        pass
        print("Incorrect database password. Please provide the correct password to open the database.")
        #exit(1)

    # Set the new master password
    try:
        kp_db.credentials = pykeepass.PyKeePassCredentials(new_master_password)
        kp_db.save()
        print("Master password has been changed successfully.")
    except Exception as e:
        print(f"An error occurred while changing the master password: {str(e)}")
    finally:
        if 'kp_db' in locals():
            kp_db.close()

with open(r"E:\....\pass.txt",encoding="utf=8") as fh:
    for line in fh:
        pwd=line.strip()
        print(pwd)
        change_me(pwd)
